# 计算机系统结构

[English](README.md) | 简体中文

## 概述

理解计算机在硬件层面如何工作，从逻辑门到处理器设计。本模块涵盖计算机系统、存储层次结构、处理器架构，以及硬件和软件之间的关系。

## 为何要学？

如果你对于计算机如何工作没有具体的概念，那么你所做出的所有高级抽象都是空中楼阁。

理解计算机系统结构将使你：

- 编写更高效的代码
- 理解性能瓶颈的根源
- 更好地调试底层问题
- 理解安全漏洞（如缓冲区溢出）的原理
- 在系统编程和嵌入式开发中更有竞争力

> 硬件是平台。
>
> — Mike Acton, Engine Director at Insomniac Games
> （[观看他在 CppCon 上的演说](https://www.youtube.com/watch?v=rX0ItVEVjHc)）

## 前置要求

**推荐：**

- 编程 - 理解基本编程概念有助于理解软件如何与硬件交互

## 编程语言

- **C**（中级）- 底层编程，用于理解内存管理和硬件交互
- **汇编语言**（初级）- 理解处理器级别的操作
- **HDL（硬件描述语言）**（初级）- 用于 Nand2Tetris 硬件模拟

## 推荐资源

### 教材

#### 《深入理解计算机系统》（CS:APP）

**作者：** Randal Bryant, David O'Hallaron

**中文版：** [《深入理解计算机系统》第三版](https://book.douban.com/subject/26912767/)

**英文版：** Computer Systems: A Programmer's Perspective (3rd Edition)

**ISBN：** 978-0134092669

**难度：** 中级

**推荐章节：** 第 1-6 章（建立基础理解）

**配套课程：** [CMU 15-213](http://csapp.cs.cmu.edu/3e/courses.html)

**为什么选择这本书：**

我们喜爱《深入理解计算机系统》，因为它的实用性，并且站在程序员的视角。虽然计算机体系结构的内容比本书所涉及的内容多得多，但对于那些想了解计算机系统以求编写更快、更高效、更可靠的软件的人来说，这本书是很好的起点。

这本书涵盖：

- 信息的表示和处理
- 程序的机器级表示（汇编语言）
- 处理器体系结构
- 存储器层次结构
- 链接
- 异常控制流
- 虚拟内存

**配套资源：**

- [CS:APP 官方网站](http://csapp.cs.cmu.edu/3e/students.html) - Labs 和资源
- [CS:APP Labs](http://csapp.cs.cmu.edu/3e/labs.html) - 实验项目

#### 《计算机系统要素》（Nand2Tetris）

**作者：** Noam Nisan, Shimon Schocken

**中文版：** [《计算机系统要素：从零开始构建现代计算机》](https://book.douban.com/subject/1998341/)

**英文版：** The Elements of Computing Systems

**在线资源：** [nand2tetris.org](https://www.nand2tetris.org/)

**难度：** 初级到中级

**推荐章节：** 前六章和相关项目

**为什么选择这本书：**

对于那些既想了解这个主题又想兼顾硬件和软件的知识的人来说，这本书非常适合。这本书规模宏大，让读者对计算机内的所有部分如何协同工作有完全的认识。

这本书的每一章节对应如何构建计算机整体系统中的一小部分，从用 HDL（硬件描述语言）写基本的逻辑门电路出发，途经 CPU 和汇编，最终抵达诸如俄罗斯方块这般规模的应用程序。

**项目内容：**

1. 布尔逻辑（Boolean Logic）
2. 布尔运算（Boolean Arithmetic）
3. 时序逻辑（Sequential Logic）
4. 机器语言（Machine Language）
5. 计算机体系结构（Computer Architecture）
6. 汇编编译器（Assembler）

**注意：** 为了追求简洁和紧凑，这本书牺牲了内容上的深度。尤其值得注意的是，流水线和存储层次结构是现代计算机体系结构中极其重要的两个概念，然而这本书对此几乎毫无涉及。

#### 《计算机组成与设计》

**作者：** David Patterson, John Hennessy

**中文版：** [《计算机组成与设计：硬件/软件接口》](https://book.douban.com/subject/26604008/)

**难度：** 中级到高级

**何时阅读：** 在学完 CS:APP 或 Nand2Tetris 后的高级阅读

**为什么选择这本书：**

这是一本优秀的经典著作，更侧重硬件。这本书中的不同章节重要程度不一，建议根据 Berkeley 的 CS61C 课程来着重阅读某些章节。

### 视频课程

#### Berkeley CS 61C - 计算机体系结构中的伟大思想

**学校：** UC Berkeley

**平台：** Berkeley 课程网站 / Internet Archive

**链接：** [互联网档案](https://archive.org/details/ucberkeley-webcast-PL-XXv-cvA_iCl2-D-FS5mk0jFF6cYSJs_)

**课程网站：** [CS 61C](http://inst.eecs.berkeley.edu/~cs61c/sp15/)

**描述：** 涵盖 C 编程、汇编、处理器设计、存储层次结构、并行性

**配套教材：** CS:APP 或《计算机组成与设计》

**主题包括：**

- C 语言编程
- RISC-V 汇编语言
- 处理器设计（单周期、流水线）
- 缓存和存储器层次结构
- 并行处理和 OpenMP
- I/O 和操作系统接口

#### Nand2Tetris 课程

**平台：** Coursera / nand2tetris.org

**链接：**

- [Part 1: 从与非门到俄罗斯方块](https://www.coursera.org/learn/build-a-computer)
- [Part 2: 从软件到硬件](https://www.coursera.org/learn/nand2tetris2)

**描述：** 基于项目的课程，从逻辑门构建完整的计算机系统

**配套教材：** 《计算机系统要素》

### 在线资源

- [Nand2Tetris 官网](https://www.nand2tetris.org/) - 构建计算机的项目和软件
- [CS:APP 学生网站](http://csapp.cs.cmu.edu/3e/students.html) - Labs 和资源
- [深入理解计算机系统 PDF](https://book.douban.com/subject/26912767/) - 中文版购买链接

## 练习

### 实践项目

#### Nand2Tetris 项目（第 1-6 章）

**来源：** [nand2tetris.org](https://www.nand2tetris.org/)

**难度：** 中级

**预计时间：** 50-100 小时

**主题：**

- 逻辑门（与、或、非、异或等）
- ALU（算术逻辑单元）
- CPU 设计
- 汇编器实现
- 硬件模拟

**建议：** 按顺序完成项目，每个项目都建立在前一个的基础上。

#### CS:APP Labs

**来源：** [CS:APP Labs](http://csapp.cs.cmu.edu/3e/labs.html)

**难度：** 中级到高级

**预计时间：** 每个 Lab 10-20 小时

**主要 Labs：**

1. **Data Lab** - 位操作
2. **Bomb Lab** - 汇编语言和逆向工程
3. **Attack Lab** - 缓冲区溢出攻击
4. **Cache Lab** - 缓存优化
5. **Shell Lab** - 进程控制和信号
6. **Malloc Lab** - 内存分配器

**建议：** 这些实验非常有价值，特别是对于理解安全漏洞和性能优化。

### 补充练习

- 编写简单的汇编程序
- 分析和优化 C 代码的性能
- 研究实际 CPU 的设计（如 RISC-V、ARM）

## 学习方法

### 推荐学习路径

**路径 A：程序员视角（推荐给软件工程师）**

1. **阅读《深入理解计算机系统》第 1-6 章**
   - 每章都要理解透彻
   - 完成章节练习

2. **观看 Berkeley CS 61C 课程**
   - 配合阅读观看
   - 做课程笔记

3. **完成 CS:APP Labs**
   - 至少完成 Data Lab, Bomb Lab, Attack Lab
   - 这些实验对理解至关重要

4. **深入探索**（可选）
   - 继续阅读 CS:APP 后续章节
   - 学习《计算机组成与设计》的相关章节

**路径 B：从零构建（推荐给想深入理解硬件的人）**

1. **完成 Nand2Tetris 前六章**
   - 按顺序完成每个项目
   - 理解每个组件如何工作

2. **阅读《深入理解计算机系统》**
   - 填补 Nand2Tetris 遗漏的深度
   - 特别关注流水线和缓存

3. **学习现代计算机体系结构**
   - 阅读《计算机组成与设计》
   - 了解现代 CPU 的优化技术

### 时间分配建议

- **最少投入：** 100 小时（CS:APP 前 6 章 + 部分 Labs）
- **推荐投入：** 150-200 小时（包括视频课程和主要实验）
- **完整学习：** 250+ 小时（两条路径都学 + 所有项目）

### 学习技巧

1. **理论与实践结合** - 光看书不够，必须做实验
2. **从简单到复杂** - 不要跳过基础概念
3. **画图理解** - 数据通路、存储层次等概念需要可视化
4. **调试汇编代码** - 使用 GDB 等工具分析程序行为

## 常见问题

### 我应该先学 CS:APP 还是 Nand2Tetris？

- **选择 CS:APP** 如果：
  - 你主要从事软件开发
  - 你想快速理解系统性能和安全
  - 你已经有一定的 C 语言基础

- **选择 Nand2Tetris** 如果：
  - 你想从零开始理解计算机
  - 你对硬件设计感兴趣
  - 你喜欢基于项目的学习方式

**最佳方案：** 两者都学！先学 Nand2Tetris 建立全局观，再学 CS:APP 深入细节。

### 需要学习具体的汇编语言吗？

是的，至少要学一种。CS:APP 使用 x86-64，CS 61C 使用 RISC-V。理解任何一种汇编语言都能帮助你理解计算机的工作原理。

### 这些知识对实际工作有用吗？

非常有用！

- **性能优化** - 理解缓存、内存对齐等
- **安全** - 理解缓冲区溢出、代码注入
- **系统编程** - 操作系统、数据库、编译器开发
- **嵌入式开发** - 直接与硬件交互
- **面试** - 许多公司会问系统层面的问题

## 学习笔记

[在学习过程中可以在此添加个人笔记和关键见解]

## 进度跟踪

- [ ] 完成核心教材阅读（CS:APP 第 1-6 章或 Nand2Tetris 第 1-6 章）
- [ ] 观看主要视频课程系列
- [ ] 完成 Nand2Tetris 项目或 CS:APP Labs
- [ ] 理解处理器架构和存储层次结构
- [ ] 复习和巩固

---

**下一步：** 完成本模块后，建议继续学习 [操作系统](../operating-systems/README_CN.md)，因为操作系统的学习建立在对计算机系统结构的理解之上。
